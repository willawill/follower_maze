require_relative "lib/follower_maze"

desc "Start the server"
task :run_server, [:event_host, :client_host, :client_port, :event_port, :log_level] do |t, args|
  args.with_defaults(event_host: "127.0.0.1", client_host: "127.0.0.1", client_port: 9099, event_port: 9090)

  client_config = FollowerMaze::ListenerConfig.new(args.client_host, args.client_port)
  event_config = FollowerMaze::ListenerConfig.new(args.event_host, args.event_port)

  server = FollowerMaze::Server.new(client_config, event_config)
  server.start
end

task default: :run_server
